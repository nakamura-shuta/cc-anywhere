import"./NZTpNUN0.js";import{p as d,f,a as p,b as m,c as w,n as b,r as y}from"./DsgVtOPg.js";import{a as E}from"./2BTfzV6r.js";import{a as g}from"./B6tQqGKT.js";import{p as U,r as T,b as A}from"./8Ee0J66D.js";import{c as x}from"./Dgibhu4a.js";import{a as O,b as h}from"./vycYFVnX.js";var q=f("<p><!></p>");function R(u,t){d(t,!0);let r=U(t,"ref",15,null),e=T(t,["$$slots","$$events","$$legacy","ref","class","children"]);var s=q();g(s,i=>({"data-slot":"card-description",class:i,...e}),[()=>x("text-muted-foreground text-sm",t.class)]);var o=w(s);E(o,()=>t.children??b),y(s),A(s,i=>r(i),()=>r()),p(u,s),m()}class l extends Error{constructor(t,r,e){super(`API Error: ${t} ${r}`),this.status=t,this.statusText=r,this.data=e,this.name="ApiError"}}class P{baseUrl;constructor(t){this.baseUrl=t||O(),typeof window<"u"&&console.log("ApiClient initialized with baseUrl:",this.baseUrl)}buildUrl(t,r){if(t.startsWith("http://")||t.startsWith("https://")){const s=new URL(t);return r&&Object.entries(r).forEach(([o,i])=>{s.searchParams.append(o,String(i))}),s.toString()}const e=new URL(t,this.baseUrl);return r&&Object.entries(r).forEach(([s,o])=>{e.searchParams.append(s,String(o))}),e.toString()}async fetchWithTimeout(t,r,e=3e4){const s=new AbortController,o=setTimeout(()=>s.abort(),e);try{return await fetch(t,{...r,signal:s.signal})}finally{clearTimeout(o)}}async stream(t,r={}){const{params:e,...s}=r,o=this.buildUrl(t,e),i={headers:{...h(),Accept:"text/event-stream"},...s},n=await this.fetchWithTimeout(o,i,r.timeout);if(!n.ok)throw new l(n.status,n.statusText);if(!n.body)throw new Error("No response body");return n.body}async request(t,r={}){const{params:e,timeout:s,...o}=r,i=this.buildUrl(t,e);typeof window<"u"&&console.log("API Request:",{endpoint:t,baseUrl:this.baseUrl,fullUrl:i,method:o.method||"GET"});const n={headers:h(),...o};try{const a=await this.fetchWithTimeout(i,n,s);if(!a.ok){let c;try{c=await a.json()}catch{c={error:await a.text()}}throw console.error("API Error:",{status:a.status,statusText:a.statusText,errorData:c,endpoint:t,requestBody:o.body}),new l(a.status,a.statusText,c)}return a.status===204?{}:await a.json()}catch(a){throw a instanceof Error?a.name==="AbortError"?new Error("Request timeout"):a:new Error("Unknown error occurred")}}async get(t,r){return this.request(t,{...r,method:"GET"})}async post(t,r,e){return this.request(t,{...e,method:"POST",body:r?JSON.stringify(r):void 0})}async put(t,r,e){return this.request(t,{...e,method:"PUT",body:r?JSON.stringify(r):void 0})}async delete(t,r){return this.request(t,{...r,method:"DELETE"})}async patch(t,r,e){return this.request(t,{...e,method:"PATCH",body:r?JSON.stringify(r):void 0})}}const k=new P;export{P as A,R as C,l as a,k as b};
