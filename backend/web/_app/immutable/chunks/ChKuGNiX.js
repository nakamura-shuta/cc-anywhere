import"./NZTpNUN0.js";import"./CvXniH3t.js";import{e as p,h as d,a as f,k as l,l as a,g as u,u as S,aY as v,m as P,d as _,p as w,b as C,n as T}from"./BC3TVD7I.js";import{I as y,s as O}from"./DsjvRSSA.js";import{l as M,s as b,i as U}from"./DlBJ8HRE.js";import{a as I}from"./l49-8nyp.js";import{w as o,d as N,e as k}from"./Lb74Bh-E.js";import{o as m}from"./Df5QlUi0.js";function Z(e,t){const n=M(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.525.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const i=[["path",{d:"m6 9 6 6 6-6"}]];y(e,b({name:"chevron-down"},()=>n,{get iconNode(){return i},children:(r,A)=>{var s=p(),c=d(s);O(c,t,"default",{}),f(r,s)},$$slots:{default:!0}}))}class x{#e=l(void 0);constructor(t,n){n!==void 0&&a(this.#e,n,!0),o(()=>t(),(i,r)=>{a(this.#e,r,!0)})}get current(){return u(this.#e)}}function E(e){S(()=>()=>{e()})}function D(e){v().then(e)}class F{state;#e;constructor(t,n){this.state=N(t),this.#e=n,this.dispatch=this.dispatch.bind(this)}#t(t){return this.#e[this.state.current][t]??this.state.current}dispatch(t){this.state.current=this.#t(t)}}const R={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}};class q{opts;#e=l("none");get prevAnimationNameState(){return u(this.#e)}set prevAnimationNameState(t){a(this.#e,t,!0)}#t=l(P({}));get styles(){return u(this.#t)}set styles(t){a(this.#t,t,!0)}initialStatus;previousPresent;machine;present;constructor(t){this.opts=t,this.present=this.opts.open,this.initialStatus=t.open.current?"mounted":"unmounted",this.previousPresent=new x(()=>this.present.current),this.machine=new F(this.initialStatus,R),this.handleAnimationEnd=this.handleAnimationEnd.bind(this),this.handleAnimationStart=this.handleAnimationStart.bind(this),z(this),Y(this),j(this)}handleAnimationEnd(t){if(!this.opts.ref.current)return;const n=h(this.opts.ref.current),i=n.includes(t.animationName)||n==="none";t.target===this.opts.ref.current&&i&&this.machine.dispatch("ANIMATION_END")}handleAnimationStart(t){this.opts.ref.current&&t.target===this.opts.ref.current&&(this.prevAnimationNameState=h(this.opts.ref.current))}#n=_(()=>["mounted","unmountSuspended"].includes(this.machine.state.current));get isPresent(){return u(this.#n)}set isPresent(t){a(this.#n,t)}}function z(e){o(()=>e.present.current,()=>{if(!e.opts.ref.current||!(e.present.current!==e.previousPresent.current))return;const n=e.prevAnimationNameState,i=h(e.opts.ref.current);if(e.present.current)e.machine.dispatch("MOUNT");else if(i==="none"||e.styles.display==="none")e.machine.dispatch("UNMOUNT");else{const r=n!==i;e.previousPresent.current&&r?e.machine.dispatch("ANIMATION_OUT"):e.machine.dispatch("UNMOUNT")}})}function Y(e){o(()=>e.machine.state.current,()=>{if(!e.opts.ref.current)return;const t=h(e.opts.ref.current);e.prevAnimationNameState=e.machine.state.current==="mounted"?t:"none"})}function j(e){o(()=>e.opts.ref.current,()=>{if(e.opts.ref.current)return e.styles=getComputedStyle(e.opts.ref.current),k(m(e.opts.ref.current,"animationstart",e.handleAnimationStart),m(e.opts.ref.current,"animationcancel",e.handleAnimationEnd),m(e.opts.ref.current,"animationend",e.handleAnimationEnd))})}function h(e){return e&&getComputedStyle(e).animationName||"none"}function $(e,t){w(t,!0);const n=new q({open:N.with(()=>t.open),ref:t.ref});var i=p(),r=d(i);{var A=s=>{var c=p(),g=d(c);I(g,()=>t.presence??T,()=>({present:n.isPresent})),f(s,c)};U(r,s=>{(t.forceMount||t.open||n.isPresent)&&s(A)})}f(e,i),C()}class B{#e;#t=void 0;#n=!1;constructor(t){this.#e=t,E(()=>this.#r())}#r(){this.#t&&(window.cancelAnimationFrame(this.#t),this.#t=void 0),this.#n=!1}run(t){if(this.#n)return;this.#r(),this.#n=!0;const n=this.#e.ref.current;if(!n){this.#n=!1;return}if(typeof n.getAnimations!="function"){this.#i(t);return}this.#t=window.requestAnimationFrame(()=>{const i=n.getAnimations();if(i.length===0){this.#i(t);return}Promise.allSettled(i.map(r=>r.finished)).then(()=>{this.#i(t)})})}#i(t){const n=()=>{t(),this.#n=!1};this.#e.afterTick?D(n):n()}}class V{#e;#t;#n;constructor(t){this.#e=t,this.#t=t.enabled??!0,this.#n=new B({ref:this.#e.ref,afterTick:this.#e.open}),o([()=>this.#e.open.current],([n])=>{this.#t&&this.#n.run(()=>{n===this.#e.open.current&&this.#e.onComplete()})})}}export{Z as C,V as O,$ as P,D as a,x as b,E as o};
