import{t as Kt}from"../chunks/CuT5Jeyz.js";import{e as Qt}from"../chunks/DNSHY1Ls.js";import"../chunks/NZTpNUN0.js";import{d as N,e as u,a,p as E,f as i,c as _,n as q,r as g,b as F,s as v,y as f,x as b,t as L,h as x,V as Nt}from"../chunks/DsgVtOPg.js";import{a as J,s as U}from"../chunks/2BTfzV6r.js";import{l as Wt,s as Xt,p as K,r as Q,b as W,i as Mt}from"../chunks/8Ee0J66D.js";import{I as Yt,s as Zt,e as te,i as ee}from"../chunks/Ctyd3DqP.js";import{c as d}from"../chunks/DYtQPdT-.js";import{c as X,B as st}from"../chunks/Dgibhu4a.js";import{C as ae,a as re,b as oe,B as se,c as le}from"../chunks/B6-b1C0K.js";import{C as ne}from"../chunks/DC4utYBl.js";import{a as Y}from"../chunks/B6tQqGKT.js";import"../chunks/eVFC9t49.js";import{G as de}from"../chunks/4jdneJbX.js";import{R as Et}from"../chunks/CE983rsk.js";import"../chunks/BVfiLATO.js";import{f as ie,j as ce}from"../chunks/C74-udT0.js";function ve(n,t){const s=Wt(t,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.525.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const c=[["path",{d:"M5 12h14"}],["path",{d:"M12 5v14"}]];Yt(n,Xt({name:"plus"},()=>s,{get iconNode(){return c},children:(e,o)=>{var r=N(),M=u(r);Zt(M,t,"default",{}),a(e,r)},$$slots:{default:!0}}))}const fe=!1,ue=async({url:n})=>{const t=Number(n.searchParams.get("page"))||1,s=Number(n.searchParams.get("limit"))||20,c=n.searchParams.get("sort")||"createdAt",e=n.searchParams.get("order")||"desc";try{typeof window<"u"&&(console.log("Client-side load function executing"),console.log("Current URL:",window.location.href));const o=await Kt.list({page:t,limit:s,sort:c,order:e});return{tasks:o.data,pagination:o.pagination}}catch(o){console.error("Failed to load tasks:",o),o instanceof Error&&console.error("Error details:",{message:o.message,stack:o.stack}),Qt(500,"タスクの読み込みに失敗しました")}},Ye=Object.freeze(Object.defineProperty({__proto__:null,load:ue,prerender:fe},Symbol.toStringTag,{value:"Module"}));var _e=i('<div data-slot="table-container" class="relative w-full overflow-x-auto"><table><!></table></div>');function ge(n,t){E(t,!0);let s=K(t,"ref",15,null),c=Q(t,["$$slots","$$events","$$legacy","ref","class","children"]);var e=_e(),o=_(e);Y(o,M=>({"data-slot":"table",class:M,...c}),[()=>X("w-full caption-bottom text-sm",t.class)]);var r=_(o);J(r,()=>t.children??q),g(o),W(o,M=>s(M),()=>s()),g(e),a(n,e),F()}var he=i("<tbody><!></tbody>");function me(n,t){E(t,!0);let s=K(t,"ref",15,null),c=Q(t,["$$slots","$$events","$$legacy","ref","class","children"]);var e=he();Y(e,r=>({"data-slot":"table-body",class:r,...c}),[()=>X("[&_tr:last-child]:border-0",t.class)]);var o=_(e);J(o,()=>t.children??q),g(e),W(e,r=>s(r),()=>s()),a(n,e),F()}var $e=i("<td><!></td>");function lt(n,t){E(t,!0);let s=K(t,"ref",15,null),c=Q(t,["$$slots","$$events","$$legacy","ref","class","children"]);var e=$e();Y(e,r=>({"data-slot":"table-cell",class:r,...c}),[()=>X("whitespace-nowrap bg-clip-padding p-2 align-middle [&:has([role=checkbox])]:pr-0",t.class)]);var o=_(e);J(o,()=>t.children??q),g(e),W(e,r=>s(r),()=>s()),a(n,e),F()}var pe=i("<th><!></th>");function gt(n,t){E(t,!0);let s=K(t,"ref",15,null),c=Q(t,["$$slots","$$events","$$legacy","ref","class","children"]);var e=pe();Y(e,r=>({"data-slot":"table-head",class:r,...c}),[()=>X("text-foreground h-10 whitespace-nowrap bg-clip-padding px-2 text-left align-middle font-medium [&:has([role=checkbox])]:pr-0",t.class)]);var o=_(e);J(o,()=>t.children??q),g(e),W(e,r=>s(r),()=>s()),a(n,e),F()}var be=i("<thead><!></thead>");function xe(n,t){E(t,!0);let s=K(t,"ref",15,null),c=Q(t,["$$slots","$$events","$$legacy","ref","class","children"]);var e=be();Y(e,r=>({"data-slot":"table-header",class:r,...c}),[()=>X("[&_tr]:border-b",t.class)]);var o=_(e);J(o,()=>t.children??q),g(e),W(e,r=>s(r),()=>s()),a(n,e),F()}var Pe=i("<tr><!></tr>");function Bt(n,t){E(t,!0);let s=K(t,"ref",15,null),c=Q(t,["$$slots","$$events","$$legacy","ref","class","children"]);var e=Pe();Y(e,r=>({"data-slot":"table-row",class:r,...c}),[()=>X("hover:[&,&>svelte-css-wrapper]:[&>th,td]:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t.class)]);var o=_(e);J(o,()=>t.children??q),g(e),W(e,r=>s(r),()=>s()),a(n,e),F()}var we=i("<!> ツリー表示",1),ye=i("<!> 更新",1),ke=i("<!> 新しいタスク",1),Te=i("<!> <!>",1),Ce=i("<!> <!> <!> <!>",1),je=i('<div class="flex items-center gap-1 text-xs text-muted-foreground"><!> <span>継続タスク</span></div>'),Ne=i('<div class="space-y-1"><p class="truncate"> </p> <!></div>'),Me=i("<!> <!> <!> <!>",1),Be=i("<!> <!>",1),De=i("<!> <!>",1),Ie=i('<div class="flex justify-center gap-2"><!> <div class="flex items-center px-4"> </div> <!></div>'),Re=i('<div class="space-y-6"><div class="flex justify-between items-center"><div><h2 class="text-3xl font-bold tracking-tight">タスク一覧</h2> <p class="text-muted-foreground">実行中のタスクを管理</p></div> <div class="flex gap-2"><!> <!> <!></div></div> <!> <!></div>');function Ze(n,t){E(t,!0);function s(l){switch(l){case"completed":return"default";case"running":return"secondary";case"failed":return"destructive";case"cancelled":return"outline";default:return"secondary"}}function c(l){return l?ie(new Date(l),"yyyy/MM/dd HH:mm",{locale:ce}):"-"}function e(l){if(!l)return"-";const P=l.split("/");return P[P.length-1]||"-"}function o(l){window.location.href=`/tasks/${l}`}function r(){window.location.reload()}function M(){window.location.href="/tasks/new"}var ht=Re(),mt=_(ht),Dt=v(_(mt),2),It=_(Dt);st(It,{variant:"outline",onclick:()=>window.location.href="/tasks/tree",children:(l,P)=>{var m=we(),T=u(m);de(T,{class:"mr-2 h-4 w-4"}),f(),a(l,m)},$$slots:{default:!0}});var Rt=v(It,2);st(Rt,{variant:"outline",onclick:r,children:(l,P)=>{var m=ye(),T=u(m);Et(T,{class:"mr-2 h-4 w-4"}),f(),a(l,m)},$$slots:{default:!0}});var Ft=v(Rt,2);st(Ft,{onclick:M,children:(l,P)=>{var m=ke(),T=u(m);ve(T,{class:"mr-2 h-4 w-4"}),f(),a(l,m)},$$slots:{default:!0}}),g(Dt),g(mt);var St=v(mt,2);d(St,()=>le,(l,P)=>{P(l,{children:(m,T)=>{var nt=De(),dt=u(nt);d(dt,()=>ae,(B,tt)=>{tt(B,{children:(D,Ot)=>{var et=Te(),it=u(et);d(it,()=>re,(at,rt)=>{rt(at,{children:(ct,vt)=>{f();var I=b("実行中のタスク");a(ct,I)},$$slots:{default:!0}})});var $t=v(it,2);d($t,()=>ne,(at,rt)=>{rt(at,{children:(ct,vt)=>{f();var I=b();L(()=>U(I,`${(t.data.pagination?.total||0)??""} 件のタスク（${t.data.pagination?.page||1}/${t.data.pagination?.totalPages||1} ページ）`)),a(ct,I)},$$slots:{default:!0}})}),a(D,et)},$$slots:{default:!0}})});var Z=v(dt,2);d(Z,()=>oe,(B,tt)=>{tt(B,{children:(D,Ot)=>{var et=N(),it=u(et);d(it,()=>ge,($t,at)=>{at($t,{children:(rt,ct)=>{var vt=Be(),I=u(vt);d(I,()=>xe,(pt,bt)=>{bt(pt,{children:(xt,Lt)=>{var ot=N(),Pt=u(ot);d(Pt,()=>Bt,(wt,yt)=>{yt(wt,{children:(j,G)=>{var H=Ce(),O=u(H);d(O,()=>gt,($,w)=>{w($,{children:(y,V)=>{f();var p=b("ステータス");a(y,p)},$$slots:{default:!0}})});var h=v(O,2);d(h,()=>gt,($,w)=>{w($,{children:(y,V)=>{f();var p=b("リポジトリ");a(y,p)},$$slots:{default:!0}})});var R=v(h,2);d(R,()=>gt,($,w)=>{w($,{children:(y,V)=>{f();var p=b("指示内容");a(y,p)},$$slots:{default:!0}})});var ft=v(R,2);d(ft,()=>gt,($,w)=>{w($,{children:(y,V)=>{f();var p=b("作成日時");a(y,p)},$$slots:{default:!0}})}),a(j,H)},$$slots:{default:!0}})}),a(xt,ot)},$$slots:{default:!0}})});var Vt=v(I,2);d(Vt,()=>me,(pt,bt)=>{bt(pt,{children:(xt,Lt)=>{var ot=N(),Pt=u(ot);{var wt=j=>{var G=N(),H=u(G);te(H,17,()=>t.data.tasks,ee,(O,h)=>{var R=N(),ft=u(R);d(ft,()=>Bt,($,w)=>{w($,{class:"cursor-pointer hover:bg-muted/50 transition-colors",onclick:()=>o(x(h).taskId),children:(y,V)=>{var p=Me(),kt=u(p);d(kt,()=>lt,(S,z)=>{z(S,{children:(A,Tt)=>{{let k=Nt(()=>s(x(h).status));se(A,{get variant(){return x(k)},children:(C,At)=>{f();var _t=b();L(()=>U(_t,x(h).status)),a(C,_t)},$$slots:{default:!0}})}},$$slots:{default:!0}})});var ut=v(kt,2);d(ut,()=>lt,(S,z)=>{z(S,{class:"text-sm",children:(A,Tt)=>{f();var k=b();L(C=>U(k,C),[()=>e(x(h).context?.workingDirectory||x(h).workingDirectory)]),a(A,k)},$$slots:{default:!0}})});var zt=v(ut,2);d(zt,()=>lt,(S,z)=>{z(S,{class:"max-w-md",children:(A,Tt)=>{var k=Ne(),C=_(k),At=_(C,!0);g(C);var _t=v(C,2);{var qt=Ct=>{var jt=je(),Jt=_(jt);Et(Jt,{class:"h-3 w-3"}),f(2),g(jt),a(Ct,jt)};Mt(_t,Ct=>{(x(h).continuedFrom||x(h).parentTaskId)&&Ct(qt)})}g(k),L(()=>U(At,x(h).instruction)),a(A,k)},$$slots:{default:!0}})});var Ut=v(zt,2);d(Ut,()=>lt,(S,z)=>{z(S,{children:(A,Tt)=>{f();var k=b();L(C=>U(k,C),[()=>c(x(h).createdAt)]),a(A,k)},$$slots:{default:!0}})}),a(y,p)},$$slots:{default:!0}})}),a(O,R)}),a(j,G)},yt=j=>{var G=N(),H=u(G);d(H,()=>Bt,(O,h)=>{h(O,{children:(R,ft)=>{var $=N(),w=u($);d(w,()=>lt,(y,V)=>{V(y,{colspan:4,class:"text-center text-muted-foreground",children:(p,kt)=>{f();var ut=b("タスクがありません");a(p,ut)},$$slots:{default:!0}})}),a(R,$)},$$slots:{default:!0}})}),a(j,G)};Mt(Pt,j=>{t.data.tasks&&t.data.tasks.length>0?j(wt):j(yt,!1)})}a(xt,ot)},$$slots:{default:!0}})}),a(rt,vt)},$$slots:{default:!0}})}),a(D,et)},$$slots:{default:!0}})}),a(m,nt)},$$slots:{default:!0}})});var Gt=v(St,2);{var Ht=l=>{var P=Ie(),m=_(P);{let Z=Nt(()=>t.data.pagination.page<=1);st(m,{variant:"outline",get disabled(){return x(Z)},onclick:()=>window.location.href=`/tasks?page=${t.data.pagination.page-1}`,children:(B,tt)=>{f();var D=b("前へ");a(B,D)},$$slots:{default:!0}})}var T=v(m,2),nt=_(T);g(T);var dt=v(T,2);{let Z=Nt(()=>t.data.pagination.page>=t.data.pagination.totalPages);st(dt,{variant:"outline",get disabled(){return x(Z)},onclick:()=>window.location.href=`/tasks?page=${t.data.pagination.page+1}`,children:(B,tt)=>{f();var D=b("次へ");a(B,D)},$$slots:{default:!0}})}g(P),L(()=>U(nt,`ページ ${t.data.pagination.page??""} / ${t.data.pagination.totalPages??""}`)),a(l,P)};Mt(Gt,l=>{t.data.pagination&&t.data.pagination.totalPages>1&&l(Ht)})}g(ht),a(n,ht),F()}export{Ze as component,Ye as universal};
