import{a as be}from"../chunks/BGc_tSxm.js";import{e as sr}from"../chunks/DNSHY1Ls.js";import"../chunks/NZTpNUN0.js";import{d as w,e as f,a,h as E,g as s,l as A,k as V,aq as Ue,p as G,b as X,f as D,c as x,n as we,r as y,s as h,m as Me,x as wt,C as N,u as Nt,B as j,t as de}from"../chunks/CibTsHxy.js";import{s as or,a as ar}from"../chunks/TTwLhnF3.js";import{p as nr}from"../chunks/CU8VycV0.js";import{g as St}from"../chunks/DhtFd032.js";import{c as Be,B as xe}from"../chunks/BkNxBhzy.js";import{a as re,d as ir,o as lr,s as le}from"../chunks/DMzQSiFV.js";import{l as zt,s as ge,p as C,i as Y,r as pe,b as Ot}from"../chunks/D2tfWl3j.js";import{I as Ft,s as Mt,a as Oe,i as Fe}from"../chunks/BBRwJ9cY.js";import{c as z}from"../chunks/Dmq7Nx9n.js";import{a as Ae,r as Ct,g as Dt}from"../chunks/BR09V1wi.js";import{d as cr,e as dr}from"../chunks/BTv9tsTU.js";import{F as ur,c as vr,E as hr,D as fr,T as gr,d as kt,P as pr,R as it,S as lt,a as ct,b as dt}from"../chunks/CQKzkG8V.js";import{a as He,w as Bt,d as W,c as mr,l as _r,b as Ke,m as $e}from"../chunks/CvxMnhAS.js";import{C as yr,S as xr,d as Pr,n as ze}from"../chunks/iNO-dr0C.js";import{O as br,P as Lt}from"../chunks/BUDdbBSC.js";import{I as Qe}from"../chunks/CU3n_vQS.js";import{L as he,T as Tt}from"../chunks/CqC_3kme.js";import{r as $r}from"../chunks/Cm2qQ51_.js";import"../chunks/B5zMa-mz.js";import{C as jt,B as wr,a as Rt}from"../chunks/Bvs5g0ah.js";import{C as Sr}from"../chunks/th8Y5GeV.js";import{P as qt}from"../chunks/D_hoom7v.js";function Cr(o,e){const t=zt(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.525.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const n=[["path",{d:"M8 2v4"}],["path",{d:"M16 2v4"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2"}],["path",{d:"M3 10h18"}]];Ft(o,ge({name:"calendar"},()=>t,{get iconNode(){return n},children:(r,i)=>{var l=w(),c=f(l);Mt(c,e,"default",{}),a(r,l)},$$slots:{default:!0}}))}function Dr(o,e){const t=zt(e,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.525.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2022 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2022.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 */const n=[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]];Ft(o,ge({name:"x"},()=>t,{get iconNode(){return n},children:(r,i)=>{var l=w(),c=f(l);Mt(c,e,"default",{}),a(r,l)},$$slots:{default:!0}}))}const kr=mr({component:"dialog",parts:["content","trigger","overlay","title","description","close","cancel","action"]}),Le=new yr("Dialog.Root | AlertDialog.Root");class ut{static create(e){return Le.set(new ut(e))}opts;#e=V(null);get triggerNode(){return s(this.#e)}set triggerNode(e){A(this.#e,e,!0)}#t=V(null);get contentNode(){return s(this.#t)}set contentNode(e){A(this.#t,e,!0)}#r=V(null);get descriptionNode(){return s(this.#r)}set descriptionNode(e){A(this.#r,e,!0)}#s=V(void 0);get contentId(){return s(this.#s)}set contentId(e){A(this.#s,e,!0)}#o=V(void 0);get titleId(){return s(this.#o)}set titleId(e){A(this.#o,e,!0)}#a=V(void 0);get triggerId(){return s(this.#a)}set triggerId(e){A(this.#a,e,!0)}#n=V(void 0);get descriptionId(){return s(this.#n)}set descriptionId(e){A(this.#n,e,!0)}#i=V(null);get cancelNode(){return s(this.#i)}set cancelNode(e){A(this.#i,e,!0)}constructor(e){this.opts=e,this.handleOpen=this.handleOpen.bind(this),this.handleClose=this.handleClose.bind(this),new br({ref:W.with(()=>this.contentNode),open:this.opts.open,enabled:!0,onComplete:()=>{this.opts.onOpenChangeComplete.current(this.opts.open.current)}})}handleOpen(){this.opts.open.current||(this.opts.open.current=!0)}handleClose(){this.opts.open.current&&(this.opts.open.current=!1)}getBitsAttr=e=>kr.getAttr(e,this.opts.variant.current);#l=E(()=>({"data-state":_r(this.opts.open.current)}));get sharedProps(){return s(this.#l)}set sharedProps(e){A(this.#l,e)}}class vt{static create(e){return new vt(e,Le.get())}opts;root;attachment;constructor(e,t){this.opts=e,this.root=t,this.attachment=He(this.opts.ref),this.onclick=this.onclick.bind(this),this.onkeydown=this.onkeydown.bind(this)}onclick(e){this.opts.disabled.current||e.button>0||this.root.handleClose()}onkeydown(e){this.opts.disabled.current||(e.key===xr||e.key===Pr)&&(e.preventDefault(),this.root.handleClose())}#e=E(()=>({id:this.opts.id.current,[this.root.getBitsAttr(this.opts.variant.current)]:"",onclick:this.onclick,onkeydown:this.onkeydown,disabled:this.opts.disabled.current?!0:void 0,tabindex:0,...this.root.sharedProps,...this.attachment}));get props(){return s(this.#e)}set props(e){A(this.#e,e)}}class ht{static create(e){return new ht(e,Le.get())}opts;root;attachment;constructor(e,t){this.opts=e,this.root=t,this.root.titleId=this.opts.id.current,this.attachment=He(this.opts.ref),Bt.pre(()=>this.opts.id.current,n=>{this.root.titleId=n})}#e=E(()=>({id:this.opts.id.current,role:"heading","aria-level":this.opts.level.current,[this.root.getBitsAttr("title")]:"",...this.root.sharedProps,...this.attachment}));get props(){return s(this.#e)}set props(e){A(this.#e,e)}}class ft{static create(e){return new ft(e,Le.get())}opts;root;attachment;constructor(e,t){this.opts=e,this.root=t,this.root.descriptionId=this.opts.id.current,this.attachment=He(this.opts.ref,n=>{this.root.descriptionNode=n}),Bt.pre(()=>this.opts.id.current,n=>{this.root.descriptionId=n})}#e=E(()=>({id:this.opts.id.current,[this.root.getBitsAttr("description")]:"",...this.root.sharedProps,...this.attachment}));get props(){return s(this.#e)}set props(e){A(this.#e,e)}}class gt{static create(e){return new gt(e,Le.get())}opts;root;attachment;constructor(e,t){this.opts=e,this.root=t,this.attachment=He(this.opts.ref,n=>{this.root.contentNode=n,this.root.contentId=n?.id})}#e=E(()=>({open:this.root.opts.open.current}));get snippetProps(){return s(this.#e)}set snippetProps(e){A(this.#e,e)}#t=E(()=>({id:this.opts.id.current,role:this.root.opts.variant.current==="alert-dialog"?"alertdialog":"dialog","aria-modal":"true","aria-describedby":this.root.descriptionId,"aria-labelledby":this.root.titleId,[this.root.getBitsAttr("content")]:"",style:{pointerEvents:"auto",outline:this.root.opts.variant.current==="alert-dialog"?"none":void 0},tabindex:this.root.opts.variant.current==="alert-dialog"?-1:void 0,...this.root.sharedProps,...this.attachment}));get props(){return s(this.#t)}set props(e){A(this.#t,e)}}class pt{static create(e){return new pt(e,Le.get())}opts;root;attachment;constructor(e,t){this.opts=e,this.root=t,this.attachment=He(this.opts.ref)}#e=E(()=>({open:this.root.opts.open.current}));get snippetProps(){return s(this.#e)}set snippetProps(e){A(this.#e,e)}#t=E(()=>({id:this.opts.id.current,[this.root.getBitsAttr("overlay")]:"",style:{pointerEvents:"auto"},...this.root.sharedProps,...this.attachment}));get props(){return s(this.#t)}set props(e){A(this.#t,e)}}var Tr=D("<div><!></div>");function Ar(o,e){const t=Ue();G(e,!0);let n=C(e,"id",19,()=>Ke(t)),r=C(e,"ref",15,null),i=C(e,"level",3,2),l=pe(e,["$$slots","$$events","$$legacy","id","ref","child","children","level"]);const c=ht.create({id:W.with(()=>n()),level:W.with(()=>i()),ref:W.with(()=>r(),v=>r(v))}),d=E(()=>$e(l,c.props));var _=w(),S=f(_);{var O=v=>{var u=w(),$=f(u);re($,()=>e.child,()=>({props:s(d)})),a(v,u)},p=v=>{var u=Tr();Ae(u,()=>({...s(d)}));var $=x(u);re($,()=>e.children??we),y(u),a(v,u)};Y(S,v=>{e.child?v(O):v(p,!1)})}a(o,_),X()}function Ir({forceMount:o,present:e,open:t}){return(o||e)&&t}var Er=D("<div><!></div>");function Nr(o,e){const t=Ue();G(e,!0);let n=C(e,"id",19,()=>Ke(t)),r=C(e,"forceMount",3,!1),i=C(e,"ref",15,null),l=pe(e,["$$slots","$$events","$$legacy","id","forceMount","child","children","ref"]);const c=pt.create({id:W.with(()=>n()),ref:W.with(()=>i(),_=>i(_))}),d=E(()=>$e(l,c.props));{const _=O=>{var p=w(),v=f(p);{var u=P=>{var g=w(),k=f(g);{let I=E(()=>({props:$e(s(d)),...c.snippetProps}));re(k,()=>e.child,()=>s(I))}a(P,g)},$=P=>{var g=Er();Ae(g,I=>({...I}),[()=>$e(s(d))]);var k=x(g);re(k,()=>e.children??we,()=>c.snippetProps),y(g),a(P,g)};Y(v,P=>{e.child?P(u):P($,!1)})}a(O,p)};let S=E(()=>c.root.opts.open.current||r());Lt(o,{get open(){return s(S)},get ref(){return c.opts.ref},presence:_,$$slots:{presence:!0}})}X()}var zr=D("<div><!></div>");function Or(o,e){const t=Ue();G(e,!0);let n=C(e,"id",19,()=>Ke(t)),r=C(e,"ref",15,null),i=pe(e,["$$slots","$$events","$$legacy","id","children","child","ref"]);const l=ft.create({id:W.with(()=>n()),ref:W.with(()=>r(),p=>r(p))}),c=E(()=>$e(i,l.props));var d=w(),_=f(d);{var S=p=>{var v=w(),u=f(v);re(u,()=>e.child,()=>({props:s(c)})),a(p,v)},O=p=>{var v=zr();Ae(v,()=>({...s(c)}));var u=x(v);re(u,()=>e.children??we),y(v),a(p,v)};Y(_,p=>{e.child?p(S):p(O,!1)})}a(o,d),X()}function Fr(o,e){G(e,!0);let t=C(e,"open",15,!1),n=C(e,"onOpenChange",3,ze),r=C(e,"onOpenChangeComplete",3,ze);ut.create({variant:W.with(()=>"dialog"),open:W.with(()=>t(),c=>{t(c),n()(c)}),onOpenChangeComplete:W.with(()=>r())});var i=w(),l=f(i);re(l,()=>e.children??we),a(o,i),X()}var Mr=D("<button><!></button>");function Br(o,e){const t=Ue();G(e,!0);let n=C(e,"id",19,()=>Ke(t)),r=C(e,"ref",15,null),i=C(e,"disabled",3,!1),l=pe(e,["$$slots","$$events","$$legacy","children","child","id","ref","disabled"]);const c=vt.create({variant:W.with(()=>"close"),id:W.with(()=>n()),ref:W.with(()=>r(),v=>r(v)),disabled:W.with(()=>!!i())}),d=E(()=>$e(l,c.props));var _=w(),S=f(_);{var O=v=>{var u=w(),$=f(u);re($,()=>e.child,()=>({props:s(d)})),a(v,u)},p=v=>{var u=Mr();Ae(u,()=>({...s(d)}));var $=x(u);re($,()=>e.children??we),y(u),a(v,u)};Y(S,v=>{e.child?v(O):v(p,!1)})}a(o,_),X()}var Lr=D("<!> <!>",1),jr=D("<!> <div><!></div>",1);function Rr(o,e){const t=Ue();G(e,!0);let n=C(e,"id",19,()=>Ke(t)),r=C(e,"ref",15,null),i=C(e,"forceMount",3,!1),l=C(e,"onCloseAutoFocus",3,ze),c=C(e,"onOpenAutoFocus",3,ze),d=C(e,"onEscapeKeydown",3,ze),_=C(e,"onInteractOutside",3,ze),S=C(e,"trapFocus",3,!0),O=C(e,"preventScroll",3,!0),p=C(e,"restoreScrollDelay",3,null),v=pe(e,["$$slots","$$events","$$legacy","id","children","child","ref","forceMount","onCloseAutoFocus","onOpenAutoFocus","onEscapeKeydown","onInteractOutside","trapFocus","preventScroll","restoreScrollDelay"]);const u=gt.create({id:W.with(()=>n()),ref:W.with(()=>r(),P=>r(P))}),$=E(()=>$e(v,u.props));{const P=k=>{{const I=(b,F)=>{let J=()=>F?.().props;hr(b,ge(()=>s($),{get enabled(){return u.root.opts.open.current},get ref(){return u.opts.ref},onEscapeKeydown:U=>{d()(U),!U.defaultPrevented&&u.root.handleClose()},children:(U,me)=>{fr(U,ge(()=>s($),{get ref(){return u.opts.ref},get enabled(){return u.root.opts.open.current},onInteractOutside:ee=>{_()(ee),!ee.defaultPrevented&&u.root.handleClose()},children:(ee,Se)=>{gr(ee,ge(()=>s($),{get ref(){return u.opts.ref},get enabled(){return u.root.opts.open.current},children:(_e,ke)=>{var oe=w(),Ce=f(oe);{var je=ae=>{var ye=Lr(),ue=f(ye);{var ve=B=>{kt(B,{get preventScroll(){return O()},get restoreScrollDelay(){return p()}})};Y(ue,B=>{u.root.opts.open.current&&B(ve)})}var M=h(ue,2);{let B=E(()=>({props:$e(s($),J()),...u.snippetProps}));re(M,()=>e.child,()=>s(B))}a(ae,ye)},Ie=ae=>{var ye=jr(),ue=f(ye);kt(ue,{get preventScroll(){return O()}});var ve=h(ue,2);Ae(ve,B=>({...B}),[()=>$e(s($),J())]);var M=x(ve);re(M,()=>e.children??we),y(ve),a(ae,ye)};Y(Ce,ae=>{e.child?ae(je):ae(Ie,!1)})}a(_e,oe)},$$slots:{default:!0}}))},$$slots:{default:!0}}))},$$slots:{default:!0}}))};let R=E(()=>Ir({forceMount:i(),present:u.root.opts.open.current,open:u.root.opts.open.current}));ur(k,{get ref(){return u.opts.ref},loop:!0,get trapFocus(){return S()},get enabled(){return s(R)},get onOpenAutoFocus(){return c()},onCloseAutoFocus:b=>{l()(b),!b.defaultPrevented&&vr(1,()=>u.root.triggerNode?.focus())},focusScope:I,$$slots:{focusScope:!0}})}};let g=E(()=>u.root.opts.open.current||i());Lt(o,ge(()=>s($),{get forceMount(){return i()},get open(){return s(g)},get ref(){return u.opts.ref},presence:P,$$slots:{presence:!0}}))}X()}const We={async list(o){const e={};return o?.limit!==void 0&&(e.limit=o.limit),o?.offset!==void 0&&(e.offset=o.offset),o?.status!==void 0&&(e.status=o.status),be.get("/api/schedules",{params:e})},async get(o){return be.get(`/api/schedules/${o}`)},async create(o){return be.post("/api/schedules",o)},async update(o,e){return be.put(`/api/schedules/${o}`,e)},async toggle(o,e){const t=e?"enable":"disable";try{return be.post(`/api/schedules/${o}/${t}`)}catch{return be.patch(`/api/schedules/${o}`,{enabled:e})}},async delete(o){return be.delete(`/api/schedules/${o}`)},async runNow(o){return be.post(`/api/schedules/${o}/run`)},async getHistory(o){return be.get(`/api/schedules/${o}/history`)}},qr=!1,Jr=async({url:o})=>{try{const e=Number(o.searchParams.get("page"))||1,t=Number(o.searchParams.get("limit"))||10,n=o.searchParams.get("status")||void 0,r=(e-1)*t,{schedules:i,total:l}=await We.list({limit:t,offset:r,status:n});return{schedules:i,total:l,currentPage:e,pageSize:t,totalPages:Math.ceil(l/t),status:n}}catch(e){throw console.error("Failed to load schedules:",e),sr(500,"スケジュールの読み込みに失敗しました")}},vo=Object.freeze(Object.defineProperty({__proto__:null,load:Jr,prerender:qr},Symbol.toStringTag,{value:"Module"})),Ur=typeof document<"u";let At=0;class Hr{#e=V(Me([]));get toasts(){return s(this.#e)}set toasts(e){A(this.#e,e,!0)}#t=V(Me([]));get heights(){return s(this.#t)}set heights(e){A(this.#t,e,!0)}#r=e=>{const t=this.toasts.findIndex(n=>n.id===e);return t===-1?null:t};addToast=e=>{Ur&&this.toasts.unshift(e)};updateToast=({id:e,data:t,type:n,message:r})=>{const i=this.toasts.findIndex(c=>c.id===e),l=this.toasts[i];this.toasts[i]={...l,...t,id:e,title:r,type:n,updated:!0}};create=e=>{const{message:t,...n}=e,r=typeof e?.id=="number"||e.id&&e.id?.length>0?e.id:At++,i=e.dismissable===void 0?!0:e.dismissable,l=e.type===void 0?"default":e.type;return wt(()=>{this.toasts.find(d=>d.id===r)?this.updateToast({id:r,data:e,type:l,message:t,dismissable:i}):this.addToast({...n,id:r,title:t,dismissable:i,type:l})}),r};dismiss=e=>(wt(()=>{if(e===void 0){this.toasts=this.toasts.map(n=>({...n,dismiss:!0}));return}const t=this.toasts.findIndex(n=>n.id===e);this.toasts[t]&&(this.toasts[t]={...this.toasts[t],dismiss:!0})}),e);remove=e=>{if(e===void 0){this.toasts=[];return}const t=this.#r(e);if(t!==null)return this.toasts.splice(t,1),e};message=(e,t)=>this.create({...t,type:"default",message:e});error=(e,t)=>this.create({...t,type:"error",message:e});success=(e,t)=>this.create({...t,type:"success",message:e});info=(e,t)=>this.create({...t,type:"info",message:e});warning=(e,t)=>this.create({...t,type:"warning",message:e});loading=(e,t)=>this.create({...t,type:"loading",message:e});promise=(e,t)=>{if(!t)return;let n;t.loading!==void 0&&(n=this.create({...t,promise:e,type:"loading",message:typeof t.loading=="string"?t.loading:t.loading()}));const r=e instanceof Promise?e:e();let i=n!==void 0;return r.then(l=>{if(typeof l=="object"&&l&&"ok"in l&&typeof l.ok=="boolean"&&!l.ok){i=!1;const c=Kr(l);this.create({id:n,type:"error",message:c})}else if(t.success!==void 0){i=!1;const c=typeof t.success=="function"?t.success(l):t.success;this.create({id:n,type:"success",message:c})}}).catch(l=>{if(t.error!==void 0){i=!1;const c=typeof t.error=="function"?t.error(l):t.error;this.create({id:n,type:"error",message:c})}}).finally(()=>{i&&(this.dismiss(n),n=void 0),t.finally?.()}),n};custom=(e,t)=>{const n=t?.id||At++;return this.create({component:e,id:n,...t}),n};removeHeight=e=>{this.heights=this.heights.filter(t=>t.toastId!==e)};setHeight=e=>{const t=this.#r(e.toastId);if(t===null){this.heights.push(e);return}this.heights[t]=e};reset=()=>{this.toasts=[],this.heights=[]}}function Kr(o){return o&&typeof o=="object"&&"status"in o?`HTTP error! Status: ${o.status}`:`Error! ${o}`}const fe=new Hr;function Vr(o,e){return fe.create({message:o,...e})}const Yr=Vr,ce=Object.assign(Yr,{success:fe.success,info:fe.info,warning:fe.warning,error:fe.error,custom:fe.custom,message:fe.message,promise:fe.promise,dismiss:fe.dismiss,loading:fe.loading,getActiveToasts:()=>fe.toasts.filter(o=>!o.dismiss)});function Gr(o,e){G(e,!0);let t=C(e,"ref",15,null),n=pe(e,["$$slots","$$events","$$legacy","ref","class"]);var r=w(),i=f(r);{let l=E(()=>Be("text-lg font-semibold leading-none",e.class));z(i,()=>Ar,(c,d)=>{d(c,ge({"data-slot":"dialog-title",get class(){return s(l)}},()=>n,{get ref(){return t()},set ref(_){t(_)}}))})}a(o,r),X()}var Xr=D("<div><!></div>");function Qr(o,e){G(e,!0);let t=C(e,"ref",15,null),n=pe(e,["$$slots","$$events","$$legacy","ref","class","children"]);var r=Xr();Ae(r,l=>({"data-slot":"dialog-footer",class:l,...n}),[()=>Be("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e.class)]);var i=x(r);re(i,()=>e.children??we),y(r),Ot(r,l=>t(l),()=>t()),a(o,r),X()}var Wr=D("<div><!></div>");function Zr(o,e){G(e,!0);let t=C(e,"ref",15,null),n=pe(e,["$$slots","$$events","$$legacy","ref","class","children"]);var r=Wr();Ae(r,l=>({"data-slot":"dialog-header",class:l,...n}),[()=>Be("flex flex-col gap-2 text-center sm:text-left",e.class)]);var i=x(r);re(i,()=>e.children??we),y(r),Ot(r,l=>t(l),()=>t()),a(o,r),X()}function es(o,e){G(e,!0);let t=C(e,"ref",15,null),n=pe(e,["$$slots","$$events","$$legacy","ref","class"]);var r=w(),i=f(r);{let l=E(()=>Be("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e.class));z(i,()=>Nr,(c,d)=>{d(c,ge({"data-slot":"dialog-overlay",get class(){return s(l)}},()=>n,{get ref(){return t()},set ref(_){t(_)}}))})}a(o,r),X()}var ts=D('<!> <span class="sr-only">Close</span>',1),rs=D("<!> <!>",1),ss=D("<!> <!>",1);function os(o,e){G(e,!0);let t=C(e,"ref",15,null),n=C(e,"showCloseButton",3,!0),r=pe(e,["$$slots","$$events","$$legacy","ref","class","portalProps","children","showCloseButton"]);var i=w(),l=f(i);z(l,()=>is,(c,d)=>{d(c,ge(()=>e.portalProps,{children:(_,S)=>{var O=ss(),p=f(O);z(p,()=>es,(u,$)=>{$(u,{})});var v=h(p,2);{let u=E(()=>Be("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed left-[50%] top-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e.class));z(v,()=>Rr,($,P)=>{P($,ge({"data-slot":"dialog-content",get class(){return s(u)}},()=>r,{get ref(){return t()},set ref(g){t(g)},children:(g,k)=>{var I=rs(),R=f(I);re(R,()=>e.children??we);var b=h(R,2);{var F=J=>{var U=w(),me=f(U);z(me,()=>Br,(ee,Se)=>{Se(ee,{class:"ring-offset-background focus:ring-ring rounded-xs focus:outline-hidden absolute right-4 top-4 opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 disabled:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:pointer-events-none [&_svg]:shrink-0",children:(_e,ke)=>{var oe=ts(),Ce=f(oe);Dr(Ce,{}),N(2),a(_e,oe)},$$slots:{default:!0}})}),a(J,U)};Y(b,J=>{n()&&J(F)})}a(g,I)},$$slots:{default:!0}}))})}a(_,O)},$$slots:{default:!0}}))}),a(o,i),X()}function as(o,e){G(e,!0);let t=C(e,"ref",15,null),n=pe(e,["$$slots","$$events","$$legacy","ref","class"]);var r=w(),i=f(r);{let l=E(()=>Be("text-muted-foreground text-sm",e.class));z(i,()=>Or,(c,d)=>{d(c,ge({"data-slot":"dialog-description",get class(){return s(l)}},()=>n,{get ref(){return t()},set ref(_){t(_)}}))})}a(o,r),X()}const ns=Fr,is=pr;function It(o,e="full"){if(!o)return"-";const t=typeof o=="string"?new Date(o):o;if(isNaN(t.getTime()))return"-";const r=new Date().getTime()-t.getTime();switch(e){case"relative":{const i=Math.floor(r/1e3),l=Math.floor(i/60),c=Math.floor(l/60),d=Math.floor(c/24);if(i<60)return"たった今";if(l<60)return`${l}分前`;if(c<24)return`${c}時間前`;if(d<7)return`${d}日前`;break}case"date":return t.toLocaleDateString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit"});case"time":return t.toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"});case"full":default:return t.toLocaleString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}return t.toLocaleDateString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit"})}function ls(o){if(!o)return"";const e=new Date(o);return isNaN(e.getTime())?"":e.toISOString()}function cs(o,e=50){if(!o||o.length<=e)return o;const t=o.includes("\\")?"\\":"/",n=o.split(t);if(n.length<=2)return o.substring(0,e-3)+"...";const r=n[0]||t,i=n[n.length-1];if(r.length+i.length+5>e){const _=e-5;return".../"+i.substring(i.length-_)}let c=n.slice(1,-1),d=r+t+c.join(t)+t+i;for(;d.length>e&&c.length>0;)if(c.length<=2){d=r+t+"..."+t+i;break}else c.length%2===0?c=c.slice(1):c=c.slice(0,-1),d=r+t+"..."+t+c.join(t)+t+i;if(d.length>e){const _=e-6-i.length;_>0?d=r.substring(0,_)+".../"+i:d=".../"+i}return d}function Et(o,e,t=60){const n=o.length>20?o.substring(0,17)+"...":o,r=t-n.length-3,i=cs(e,Math.max(r,20));return`${n} (${i})`}var ds=D("<!> <!>",1),us=D('<div class="text-sm text-muted-foreground">リポジトリを読み込み中...</div>'),vs=D('<div class="text-sm text-muted-foreground">利用可能なリポジトリがありません</div>'),hs=D("<!> <!>",1),fs=(o,e)=>s(e).scheduleType="cron",gs=(o,e)=>s(e).scheduleType="once",ps=D('<div class="space-y-2"><!> <!> <div class="text-sm text-muted-foreground">分 時 日 月 曜日 の形式で指定します</div> <div class="space-y-2"><!> <div class="flex flex-wrap gap-2"></div></div></div>'),ms=D('<div class="space-y-2"><!> <!></div>'),_s=D("<!> <!>",1),ys=D("<!> <!>",1),xs=D('<!> <form class="space-y-6"><div class="space-y-4"><h3 class="text-sm font-medium">基本情報</h3> <div class="space-y-2"><!> <!></div> <div class="space-y-2"><!> <!></div></div> <div class="space-y-4"><h3 class="text-sm font-medium">タスク設定</h3> <div class="space-y-2"><!> <!></div> <div class="space-y-2"><!> <!> <p class="text-xs text-muted-foreground">タスクを実行するリポジトリを選択してください</p></div></div> <div class="space-y-4"><h3 class="text-sm font-medium">スケジュール設定</h3> <div class="space-y-2"><div class="flex items-center space-x-2"><input type="radio" id="cron" name="scheduleType" value="cron" class="h-4 w-4"/> <!></div> <div class="flex items-center space-x-2"><input type="radio" id="once" name="scheduleType" value="once" class="h-4 w-4"/> <!></div></div> <!> <div class="space-y-2"><!> <!></div></div> <div class="space-y-4"><h3 class="text-sm font-medium">詳細設定</h3> <div class="space-y-2"><!> <!></div></div> <!></form>',1);function Ps(o,e){G(e,!0);let t=C(e,"open",15,!1);const n=ir();let r=V(Me({name:"",description:"",instruction:"",workingDirectory:"",scheduleType:"cron",cronExpression:"0 0 * * *",executeAt:"",timezone:"Asia/Tokyo",timeout:300})),i=V(!1),l=V(Me([])),c=V(!0);const d=[{value:"Asia/Tokyo",label:"Asia/Tokyo (JST)"},{value:"UTC",label:"UTC"},{value:"America/New_York",label:"America/New_York (EST/EDT)"},{value:"Europe/London",label:"Europe/London (GMT/BST)"}];let _=E(()=>()=>{if(!s(r).workingDirectory)return"選択してください";const P=s(l).find(g=>g.path===s(r).workingDirectory);return P?Et(P.name,P.path):s(r).workingDirectory}),S=E(()=>()=>{const P=d.find(g=>g.value===s(r).timezone);return P?P.label:s(r).timezone});const O=[{label:"毎時（0分）",value:"0 * * * *"},{label:"毎日（0時）",value:"0 0 * * *"},{label:"毎週日曜（0時）",value:"0 0 * * 0"},{label:"毎月1日（0時）",value:"0 0 1 * *"},{label:"平日（月-金）9時",value:"0 9 * * 1-5"},{label:"30分ごと",value:"*/30 * * * *"},{label:"6時間ごと",value:"0 */6 * * *"}];lr(async()=>{try{A(l,await $r.list(),!0)}catch(P){console.error("Failed to load repositories:",P),ce.error("リポジトリの取得に失敗しました")}finally{A(c,!1)}}),Nt(()=>{t()&&A(r,{name:"",description:"",instruction:"",workingDirectory:"",scheduleType:"cron",cronExpression:"0 0 * * *",executeAt:"",timezone:"Asia/Tokyo",timeout:300},!0)});function p(P){s(r).cronExpression=P}async function v(P){if(P.preventDefault(),!s(r).name.trim()){ce.error("名前を入力してください");return}if(!s(r).instruction.trim()){ce.error("実行する指示を入力してください");return}if(s(r).scheduleType==="cron"&&!s(r).cronExpression.trim()){ce.error("Cron式を入力してください");return}if(s(r).scheduleType==="once"&&!s(r).executeAt){ce.error("実行日時を入力してください");return}A(i,!0);try{const g={type:s(r).scheduleType,timezone:s(r).timezone};s(r).scheduleType==="cron"?g.expression=s(r).cronExpression:g.executeAt=ls(s(r).executeAt);const k={instruction:s(r).instruction,context:{},options:{timeout:s(r).timeout*1e3}};s(r).workingDirectory&&(k.context.workingDirectory=s(r).workingDirectory);const I=await We.create({name:s(r).name,description:s(r).description||void 0,taskRequest:k,schedule:g,status:"active"});n("create",I),t(!1)}catch(g){if(console.error("Failed to create schedule:",g),g instanceof Error&&"errorData"in g){const k=g.errorData;console.error("Error details:",k),ce.error(k?.message||"スケジュールの作成に失敗しました")}else ce.error("スケジュールの作成に失敗しました")}finally{A(i,!1)}}var u=w(),$=f(u);z($,()=>ns,(P,g)=>{g(P,{get open(){return t()},set open(k){t(k)},children:(k,I)=>{var R=w(),b=f(R);z(b,()=>os,(F,J)=>{J(F,{class:"max-w-2xl max-h-[90vh] overflow-y-auto",children:(U,me)=>{var ee=xs(),Se=f(ee);z(Se,()=>Zr,(m,L)=>{L(m,{children:(T,Pe)=>{var Q=ds(),K=f(Q);z(K,()=>Gr,(q,Z)=>{Z(q,{children:(H,De)=>{N();var se=j("新規スケジュール作成");a(H,se)},$$slots:{default:!0}})});var te=h(K,2);z(te,()=>as,(q,Z)=>{Z(q,{children:(H,De)=>{N();var se=j("定期的に実行するタスクを設定します");a(H,se)},$$slots:{default:!0}})}),a(T,Q)},$$slots:{default:!0}})});var _e=h(Se,2),ke=x(_e),oe=h(x(ke),2),Ce=x(oe);he(Ce,{for:"name",children:(m,L)=>{N();var T=j("名前 *");a(m,T)},$$slots:{default:!0}});var je=h(Ce,2);Qe(je,{id:"name",placeholder:"例: DBバックアップ",required:!0,get value(){return s(r).name},set value(m){s(r).name=m}}),y(oe);var Ie=h(oe,2),ae=x(Ie);he(ae,{for:"description",children:(m,L)=>{N();var T=j("説明");a(m,T)},$$slots:{default:!0}});var ye=h(ae,2);Tt(ye,{id:"description",placeholder:"このスケジュールの説明（任意）",rows:2,get value(){return s(r).description},set value(m){s(r).description=m}}),y(Ie),y(ke);var ue=h(ke,2),ve=h(x(ue),2),M=x(ve);he(M,{for:"instruction",children:(m,L)=>{N();var T=j("実行する指示 *");a(m,T)},$$slots:{default:!0}});var B=h(M,2);Tt(B,{id:"instruction",placeholder:"例: データベースのバックアップを作成して、S3にアップロードしてください",rows:3,required:!0,get value(){return s(r).instruction},set value(m){s(r).instruction=m}}),y(ve);var ne=h(ve,2),ie=x(ne);he(ie,{for:"workingDirectory",children:(m,L)=>{N();var T=j("作業ディレクトリ（リポジトリ）");a(m,T)},$$slots:{default:!0}});var Ze=h(ie,2);{var Jt=m=>{var L=us();a(m,L)},Ut=m=>{var L=w(),T=f(L);{var Pe=K=>{var te=vs();a(K,te)},Q=K=>{var te=w(),q=f(te);z(q,()=>it,(Z,H)=>{H(Z,{type:"single",get value(){return s(r).workingDirectory},set value(De){s(r).workingDirectory=De},children:(De,se)=>{var Ee=hs(),Ge=f(Ee);z(Ge,()=>lt,(Ne,Re)=>{Re(Ne,{id:"workingDirectory",children:(qe,ot)=>{N();var Je=j();de(at=>le(Je,at),[()=>s(_)()]),a(qe,Je)},$$slots:{default:!0}})});var Xe=h(Ge,2);z(Xe,()=>ct,(Ne,Re)=>{Re(Ne,{children:(qe,ot)=>{var Je=w(),at=f(Je);Oe(at,17,()=>s(l),Fe,(Wt,nt)=>{var $t=w(),Zt=f($t);{let er=E(()=>Et(s(nt).name,s(nt).path));z(Zt,()=>dt,(tr,rr)=>{rr(tr,{get value(){return s(nt).path},get label(){return s(er)}})})}a(Wt,$t)}),a(qe,Je)},$$slots:{default:!0}})}),a(De,Ee)},$$slots:{default:!0}})}),a(K,te)};Y(T,K=>{s(l).length===0?K(Pe):K(Q,!1)},!0)}a(m,L)};Y(Ze,m=>{s(c)?m(Jt):m(Ut,!1)})}N(2),y(ne),y(ue);var et=h(ue,2),tt=h(x(et),2),rt=x(tt),Ve=x(rt);Ct(Ve),Ve.__change=[fs,r];var Ht=h(Ve,2);he(Ht,{for:"cron",children:(m,L)=>{N();var T=j("繰り返し実行（Cron式）");a(m,T)},$$slots:{default:!0}}),y(rt);var mt=h(rt,2),Ye=x(mt);Ct(Ye),Ye.__change=[gs,r];var Kt=h(Ye,2);he(Kt,{for:"once",children:(m,L)=>{N();var T=j("1回のみ実行");a(m,T)},$$slots:{default:!0}}),y(mt),y(tt);var _t=h(tt,2);{var Vt=m=>{var L=ps(),T=x(L);he(T,{for:"cronExpression",children:(q,Z)=>{N();var H=j("Cron式 *");a(q,H)},$$slots:{default:!0}});var Pe=h(T,2);Qe(Pe,{id:"cronExpression",placeholder:"例: 0 0 * * * (毎日0時)",required:!0,get value(){return s(r).cronExpression},set value(q){s(r).cronExpression=q}});var Q=h(Pe,4),K=x(Q);he(K,{children:(q,Z)=>{N();var H=j("よく使うパターン");a(q,H)},$$slots:{default:!0}});var te=h(K,2);Oe(te,21,()=>O,Fe,(q,Z)=>{xe(q,{type:"button",variant:"outline",size:"sm",onclick:()=>p(s(Z).value),children:(H,De)=>{N();var se=j();de(()=>le(se,s(Z).label)),a(H,se)},$$slots:{default:!0}})}),y(te),y(Q),y(L),a(m,L)},Yt=m=>{var L=ms(),T=x(L);he(T,{for:"executeAt",children:(Q,K)=>{N();var te=j("実行日時 *");a(Q,te)},$$slots:{default:!0}});var Pe=h(T,2);Qe(Pe,{id:"executeAt",type:"datetime-local",required:!0,get value(){return s(r).executeAt},set value(Q){s(r).executeAt=Q}}),y(L),a(m,L)};Y(_t,m=>{s(r).scheduleType==="cron"?m(Vt):m(Yt,!1)})}var yt=h(_t,2),xt=x(yt);he(xt,{children:(m,L)=>{N();var T=j("タイムゾーン");a(m,T)},$$slots:{default:!0}});var Gt=h(xt,2);z(Gt,()=>it,(m,L)=>{L(m,{type:"single",get value(){return s(r).timezone},set value(T){s(r).timezone=T},children:(T,Pe)=>{var Q=_s(),K=f(Q);z(K,()=>lt,(q,Z)=>{Z(q,{children:(H,De)=>{N();var se=j();de(Ee=>le(se,Ee),[()=>s(S)()]),a(H,se)},$$slots:{default:!0}})});var te=h(K,2);z(te,()=>ct,(q,Z)=>{Z(q,{children:(H,De)=>{var se=w(),Ee=f(se);Oe(Ee,17,()=>d,Fe,(Ge,Xe)=>{var Ne=w(),Re=f(Ne);z(Re,()=>dt,(qe,ot)=>{ot(qe,{get value(){return s(Xe).value},get label(){return s(Xe).label}})}),a(Ge,Ne)}),a(H,se)},$$slots:{default:!0}})}),a(T,Q)},$$slots:{default:!0}})}),y(yt),y(et);var st=h(et,2),Pt=h(x(st),2),bt=x(Pt);he(bt,{for:"timeout",children:(m,L)=>{N();var T=j("タイムアウト（秒）");a(m,T)},$$slots:{default:!0}});var Xt=h(bt,2);Qe(Xt,{id:"timeout",type:"number",min:"1",max:"3600",get value(){return s(r).timeout},set value(m){s(r).timeout=m}}),y(Pt),y(st);var Qt=h(st,2);z(Qt,()=>Qr,(m,L)=>{L(m,{children:(T,Pe)=>{var Q=ys(),K=f(Q);xe(K,{type:"button",variant:"outline",onclick:()=>t(!1),get disabled(){return s(i)},children:(q,Z)=>{N();var H=j("キャンセル");a(q,H)},$$slots:{default:!0}});var te=h(K,2);xe(te,{type:"submit",get disabled(){return s(i)},children:(q,Z)=>{N();var H=j();de(()=>le(H,s(i)?"作成中...":"作成")),a(q,H)},$$slots:{default:!0}}),a(T,Q)},$$slots:{default:!0}})}),y(_e),de(()=>{Dt(Ve,s(r).scheduleType==="cron"),Dt(Ye,s(r).scheduleType==="once")}),dr("submit",_e,v),a(U,ee)},$$slots:{default:!0}})}),a(k,R)},$$slots:{default:!0}})}),a(o,u),X()}cr(["change"]);var bs=D('<p class="text-sm text-muted-foreground mb-3"> </p>'),$s=D("<div> </div>"),ws=D("<div> </div>"),Ss=D('<div class="flex items-center justify-between"><div class="flex-1"><div class="flex items-center gap-3 mb-2"><h3 class="text-lg font-semibold"> </h3> <!></div> <!> <div class="flex items-center gap-6 text-sm text-muted-foreground"><div class="flex items-center gap-1"><!> <span> </span></div> <!> <!></div></div> <div class="flex gap-2"><!> <!></div></div>');function Cs(o,e){G(e,!0);function t(c){switch(c){case"active":return"default";case"inactive":return"secondary";case"completed":return"outline";case"failed":return"destructive";default:return"secondary"}}function n(c){switch(c){case"active":return"有効";case"inactive":return"無効";case"completed":return"完了";case"failed":return"失敗";default:return c}}function r(c){if(c.schedule.type==="once")return"1回のみ";const d=c.schedule.expression;return d?d==="0 * * * *"?"毎時":d==="0 0 * * *"?"毎日":d==="0 0 * * 0"?"毎週":d==="0 0 1 * *"?"毎月":d:"-"}var i=w(),l=f(i);z(l,()=>Rt,(c,d)=>{d(c,{children:(_,S)=>{var O=w(),p=f(O);z(p,()=>jt,(v,u)=>{u(v,{class:"p-6",children:($,P)=>{var g=Ss(),k=x(g),I=x(k),R=x(I),b=x(R,!0);y(R);var F=h(R,2);{let M=E(()=>t(e.schedule.status));wr(F,{get variant(){return s(M)},children:(B,ne)=>{N();var ie=j();de(Ze=>le(ie,Ze),[()=>n(e.schedule.status)]),a(B,ie)},$$slots:{default:!0}})}y(I);var J=h(I,2);{var U=M=>{var B=bs(),ne=x(B,!0);y(B),de(()=>le(ne,e.schedule.description)),a(M,B)};Y(J,M=>{e.schedule.description&&M(U)})}var me=h(J,2),ee=x(me),Se=x(ee);Sr(Se,{class:"h-4 w-4"});var _e=h(Se,2),ke=x(_e);y(_e),y(ee);var oe=h(ee,2);{var Ce=M=>{var B=$s(),ne=x(B);y(B),de(ie=>le(ne,`次回実行: ${ie??""}`),[()=>It(e.schedule.metadata.nextExecuteAt)]),a(M,B)};Y(oe,M=>{e.schedule.metadata.nextExecuteAt&&M(Ce)})}var je=h(oe,2);{var Ie=M=>{var B=ws(),ne=x(B);y(B),de(ie=>le(ne,`最終実行: ${ie??""}`),[()=>It(e.schedule.metadata.lastExecutedAt)]),a(M,B)};Y(je,M=>{e.schedule.metadata.lastExecutedAt&&M(Ie)})}y(me),y(k);var ae=h(k,2),ye=x(ae);{var ue=M=>{xe(M,{variant:"outline",size:"sm",get onclick(){return e.onToggle},children:(B,ne)=>{N();var ie=j();de(()=>le(ie,e.schedule.status==="active"?"無効にする":"有効にする")),a(B,ie)},$$slots:{default:!0}})};Y(ye,M=>{(e.schedule.status==="active"||e.schedule.status==="inactive")&&M(ue)})}var ve=h(ye,2);xe(ve,{variant:"outline",size:"sm",class:"text-destructive",get onclick(){return e.onDelete},children:(M,B)=>{N();var ne=j("削除");a(M,ne)},$$slots:{default:!0}}),y(ae),y(g),de(M=>{le(b,e.schedule.name),le(ke,`頻度: ${M??""}`)},[()=>r(e.schedule)]),a($,g)},$$slots:{default:!0}})}),a(_,O)},$$slots:{default:!0}})}),a(o,i),X()}var Ds=D("<!> 最初のスケジュールを作成",1),ks=D('<!> <p class="text-muted-foreground">スケジュールがありません</p> <!>',1),Ts=D('<div class="space-y-4"><!></div>');function As(o,e){G(e,!0);var t=Ts(),n=x(t);{var r=l=>{var c=w(),d=f(c);z(d,()=>Rt,(_,S)=>{S(_,{children:(O,p)=>{var v=w(),u=f(v);z(u,()=>jt,($,P)=>{P($,{class:"py-12 text-center",children:(g,k)=>{var I=ks(),R=f(I);Cr(R,{class:"mx-auto h-12 w-12 text-muted-foreground mb-4"});var b=h(R,4);xe(b,{variant:"outline",class:"mt-4",get onclick(){return e.onCreateClick},children:(F,J)=>{var U=Ds(),me=f(U);qt(me,{class:"mr-2 h-4 w-4"}),N(),a(F,U)},$$slots:{default:!0}}),a(g,I)},$$slots:{default:!0}})}),a(O,v)},$$slots:{default:!0}})}),a(l,c)},i=l=>{var c=w(),d=f(c);Oe(d,17,()=>e.schedules,Fe,(_,S)=>{Cs(_,{get schedule(){return s(S)},onToggle:()=>e.onToggle(s(S).id,s(S).status),onDelete:()=>e.onDelete(s(S).id,s(S).name)})}),a(l,c)};Y(n,l=>{e.schedules.length===0?l(r):l(i,!1)})}y(t),a(o,t),X()}var Is=D("<!> <!>",1),Es=D('<div class="flex gap-4"><!></div>');function Ns(o,e){G(e,!0);let t=C(e,"selectedStatus",7);const n=[{value:"all",label:"すべて"},{value:"active",label:"有効"},{value:"inactive",label:"無効"},{value:"completed",label:"完了"},{value:"failed",label:"失敗"}];let r=E(()=>()=>{const d=n.find(_=>_.value===t());return d?d.label:"すべて"});function i(d){d&&e.onStatusChange(d)}var l=Es(),c=x(l);z(c,()=>it,(d,_)=>{_(d,{type:"single",onValueChange:i,get value(){return t()},set value(S){t(S)},children:(S,O)=>{var p=Is(),v=f(p);z(v,()=>lt,($,P)=>{P($,{class:"w-[180px]",children:(g,k)=>{N();var I=j();de(R=>le(I,R),[()=>s(r)()]),a(g,I)},$$slots:{default:!0}})});var u=h(v,2);z(u,()=>ct,($,P)=>{P($,{children:(g,k)=>{var I=w(),R=f(I);Oe(R,17,()=>n,Fe,(b,F)=>{var J=w(),U=f(J);z(U,()=>dt,(me,ee)=>{ee(me,{get value(){return s(F).value},get label(){return s(F).label}})}),a(b,J)}),a(g,I)},$$slots:{default:!0}})}),a(S,p)},$$slots:{default:!0}})}),y(l),a(o,l),X()}var zs=D('<span class="px-2">...</span>'),Os=D('<div class="mt-8 flex justify-center gap-2"><!> <!> <!></div>');function Fs(o,e){G(e,!0);var t=w(),n=f(t);{var r=i=>{var l=Os(),c=x(l);{let S=E(()=>e.currentPage===1);xe(c,{variant:"outline",size:"sm",get disabled(){return s(S)},onclick:()=>e.onPageChange(e.currentPage-1),children:(O,p)=>{N();var v=j("前へ");a(O,v)},$$slots:{default:!0}})}var d=h(c,2);Oe(d,17,()=>Array(e.totalPages),Fe,(S,O,p)=>{var v=w(),u=f(v);{var $=g=>{{let k=E(()=>p+1===e.currentPage?"default":"outline");xe(g,{get variant(){return s(k)},size:"sm",onclick:()=>e.onPageChange(p+1),children:(I,R)=>{N();var b=j();b.nodeValue=p+1,a(I,b)},$$slots:{default:!0}})}},P=g=>{var k=w(),I=f(k);{var R=b=>{var F=zs();a(b,F)};Y(I,b=>{(p+1===e.currentPage-3||p+1===e.currentPage+3)&&b(R)},!0)}a(g,k)};Y(u,g=>{p+1===1||p+1===e.totalPages||p+1>=e.currentPage-2&&p+1<=e.currentPage+2?g($):g(P,!1)})}a(S,v)});var _=h(d,2);{let S=E(()=>e.currentPage===e.totalPages);xe(_,{variant:"outline",size:"sm",get disabled(){return s(S)},onclick:()=>e.onPageChange(e.currentPage+1),children:(O,p)=>{N();var v=j("次へ");a(O,v)},$$slots:{default:!0}})}y(l),a(i,l)};Y(n,i=>{e.totalPages>1&&i(r)})}a(o,t),X()}class Ms{#e=V(Me([]));get schedules(){return s(this.#e)}set schedules(e){A(this.#e,e,!0)}#t=V(!1);get loading(){return s(this.#t)}set loading(e){A(this.#t,e,!0)}#r=V(null);get error(){return s(this.#r)}set error(e){A(this.#r,e,!0)}initialize(e){this.schedules=e||[]}async toggleSchedule(e,t){try{const n=t!=="active",r=await We.toggle(e,n);return this.schedules=this.schedules.map(i=>i.id===e?{...i,status:r.status}:i),!0}catch(n){return console.error("Failed to toggle schedule:",n),this.error="スケジュールの更新に失敗しました",!1}}async deleteSchedule(e){try{return await We.delete(e),this.schedules=this.schedules.filter(t=>t.id!==e),!0}catch(t){return console.error("Failed to delete schedule:",t),this.error="スケジュールの削除に失敗しました",!1}}addSchedule(e){this.schedules=[e,...this.schedules]}clearError(){this.error=null}}const Te=new Ms;var Bs=D("<!> 新規作成",1),Ls=D('<div class="container mx-auto py-8"><div class="mb-8"><div class="flex items-center justify-between mb-4"><div><h1 class="text-3xl font-bold">スケジューラー</h1> <p class="text-muted-foreground mt-1">定期実行タスクの管理</p></div> <!></div> <!></div> <!> <!></div> <!>',1);function ho(o,e){G(e,!0);const[t,n]=or(),r=()=>ar(nr,"$page",t);let i=V(!1),l=V(Me(e.data.status||"all"));Nt(()=>{Te.initialize(e.data.schedules)});async function c(b,F){if(await Te.toggleSchedule(b,F)){const U=F!=="active";ce.success(`スケジュールを${U?"有効":"無効"}にしました`)}else ce.error(Te.error||"スケジュールの更新に失敗しました")}async function d(b,F){if(!confirm(`「${F}」を削除してもよろしいですか？`))return;await Te.deleteSchedule(b)?ce.success("スケジュールを削除しました"):ce.error(Te.error||"スケジュールの削除に失敗しました")}function _(b){Te.addSchedule(b.detail),A(i,!1),ce.success("スケジュールを作成しました")}function S(b){if(!b)return;A(l,b,!0);const F=new URLSearchParams(r().url.searchParams);b==="all"?F.delete("status"):F.set("status",b),F.set("page","1"),St(`?${F.toString()}`)}function O(b){const F=new URLSearchParams(r().url.searchParams);F.set("page",b.toString()),St(`?${F.toString()}`)}var p=Ls(),v=f(p),u=x(v),$=x(u),P=h(x($),2);xe(P,{onclick:()=>A(i,!0),children:(b,F)=>{var J=Bs(),U=f(J);qt(U,{class:"mr-2 h-4 w-4"}),N(),a(b,J)},$$slots:{default:!0}}),y($);var g=h($,2);Ns(g,{get selectedStatus(){return s(l)},onStatusChange:S}),y(u);var k=h(u,2);As(k,{get schedules(){return Te.schedules},onToggle:c,onDelete:d,onCreateClick:()=>A(i,!0)});var I=h(k,2);Fs(I,{get currentPage(){return e.data.currentPage},get totalPages(){return e.data.totalPages},onPageChange:O}),y(v);var R=h(v,2);Ps(R,{get open(){return s(i)},set open(b){A(i,b,!0)},$$events:{create:_}}),a(o,p),X(),n()}export{ho as component,vo as universal};
