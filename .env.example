# Server Configuration
PORT=5000
HOST=0.0.0.0
NODE_ENV=development

# Claude API Configuration
# Get your API key from https://console.anthropic.com/
CLAUDE_API_KEY=your-claude-api-key-here

# OpenAI API Configuration (required for Codex Executor)
# Get your API key from https://platform.openai.com/
OPENAI_API_KEY=your-openai-api-key-here

# AWS Bedrock Configuration (optional - alternative to API key)
# AWS credentials for Bedrock access
# AWS_ACCESS_KEY_ID=your-aws-access-key
# AWS_SECRET_ACCESS_KEY=your-aws-secret-key
# AWS_REGION=us-east-1  # Only us-east-1 is supported for Claude models

# Bedrock Model ID (optional)
# Default: us.anthropic.claude-opus-4-20250514-v1:0
# Available models:
#   - us.anthropic.claude-opus-4-20250514-v1:0 (Claude Opus)
#   - us.anthropic.claude-3-5-sonnet-20241022-v2:0 (Claude 3.5 Sonnet)
#   - us.anthropic.claude-3-5-haiku-20241022-v1:0 (Claude 3.5 Haiku)
# BEDROCK_MODEL_ID=us.anthropic.claude-opus-4-20250514-v1:0

# Execution Mode Configuration
# Force a specific execution mode: api-key or bedrock
# If not set, will auto-detect based on available credentials (API key takes priority)
# FORCE_EXECUTION_MODE=api-key

# API Authentication
# Set API_KEY to enable authentication for all API endpoints.
# Leave empty to disable authentication (development mode).
# When set, requests must include the API key in either:
#   - Header: X-API-Key: your-api-key
#   - Query parameter: ?api_key=your-api-key
API_KEY=your-secret-api-key

# Logging
LOG_LEVEL=info

# CORS Configuration
CORS_ORIGIN=*

# Claude Code SDK Configuration
# Maximum turns for Claude Code SDK (default: 50)
DEFAULT_MAX_TURNS=50

# Task Execution
TASK_TIMEOUT_MS=1800000  # 30 minutes (default was 10 minutes)
MAX_CONCURRENT_TASKS=10

# Queue Configuration
QUEUE_CONCURRENCY=2
# Task retention time in memory (milliseconds, default: 300000 = 5 minutes)
TASK_RETENTION_TIME_MS=300000
# Enable automatic cleanup of completed tasks from memory (default: true)
TASK_CLEANUP_ENABLED=true

# Worker Configuration
# Worker mode: inline (default), standalone, managed
WORKER_MODE=inline
# Number of worker processes (for managed mode)
WORKER_COUNT=1

# Database (SQLite)
DB_PATH=./data/cc-anywhere.db

# Git Worktree Configuration
# Enable worktree feature for isolated task execution
ENABLE_WORKTREE=false
# Base directory for worktrees (relative to repository)
WORKTREE_BASE_PATH=.worktrees
# Maximum number of concurrent worktrees
MAX_WORKTREES=5
# Auto cleanup worktrees after completion
WORKTREE_AUTO_CLEANUP=true
# Worktree name prefix
WORKTREE_PREFIX=cc-anywhere
# Default base branch for worktrees (optional - defaults to current branch)
# WORKTREE_DEFAULT_BASE_BRANCH=main

# Tunnel Configuration (optional)
# Choose tunnel type: none, ngrok, cloudflare
TUNNEL_TYPE=none

# ngrok settings (when TUNNEL_TYPE=ngrok)
# Note: ngrok support is provided through tunnel manager

# Cloudflare Tunnel settings (when TUNNEL_TYPE=cloudflare)
# Option 1: Using existing tunnel token (recommended)
CLOUDFLARE_TUNNEL_TOKEN=
# Option 2: Create new tunnel (requires cloudflared login)
CLOUDFLARE_TUNNEL_NAME=cc-anywhere

# Common tunnel settings
# Set to true to show QR code for mobile access
SHOW_QR_CODE=false

# WebSocket Configuration
# Heartbeat interval in milliseconds (default: 30000 = 30 seconds)
WEBSOCKET_HEARTBEAT_INTERVAL=60000
# Heartbeat timeout in milliseconds (default: 60000 = 1 minute)
WEBSOCKET_HEARTBEAT_TIMEOUT=120000
# Authentication timeout in milliseconds (default: 10000 = 10 seconds)
WEBSOCKET_AUTH_TIMEOUT=30000
# Maximum log buffer size (default: 1000, increased to 10000)
WEBSOCKET_MAX_LOG_BUFFER_SIZE=10000

# QR Code Display Configuration
# Enable QR code display feature (Note: This is not an authentication feature)
# When enabled, shows QR codes for tunnel URLs to easily access from mobile devices
QR_AUTH_ENABLED=false
# QR code display session duration in milliseconds (default: 86400000 = 24 hours)
QR_AUTH_SESSION_DURATION=86400000

# Security Configuration
# ğŸ”´ é‡è¦: Allowed working directories for task execution
# æœªè¨­å®šã®å ´åˆã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã®ã¿ã‚’è¨±å¯ï¼ˆã‚»ã‚­ãƒ¥ã‚¢ãªãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
# è¤‡æ•°ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’è¨±å¯ã™ã‚‹å ´åˆã¯ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§æŒ‡å®š
# ä¾‹: ALLOWED_WORKING_DIRECTORIES=/path/to/project1,/path/to/project2
ALLOWED_WORKING_DIRECTORIES=

# Enable strict path validation (blocks system directories like /etc, /root, etc.)
STRICT_PATH_VALIDATION=true

# ãƒ›ãƒ¯ã‚¤ãƒˆãƒªã‚¹ãƒˆãƒã‚§ãƒƒã‚¯ã‚’å¿…é ˆã«ã™ã‚‹
# âš ï¸ è­¦å‘Š: falseã«ã™ã‚‹ã¨ä»»æ„ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨±å¯ã—ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒªã‚¹ã‚¯ãŒé«˜ã¾ã‚Šã¾ã™
REQUIRE_WHITELIST=true

# Experimental Features
# Enable new ChatSDKClient implementation (unified SDK base)
# Set to true to use the new implementation, false to use the legacy implementation
# Default: false (legacy implementation)
USE_NEW_CHAT_CLIENT=false