# 2025-01-14 権限モードUIの統一

## 概要

タスク実行画面とスケジューラー画面で権限モードの表記を統一し、ユーザーにとってわかりやすくシンプルな表現に改善しました。

## 変更内容

### 1. 統一された表記

従来の技術的な用語（default、acceptEdits等）から、日本語でわかりやすい表現に変更：

- **確認あり** - すべての操作前に確認
- **編集のみ自動** - ファイル編集は自動、その他は確認
- **すべて自動** - すべての操作を自動実行
- **計画のみ** - 実行せず計画のみ作成

### 2. UI改善

#### タスク実行画面（index.html）
- トグルボタン形式で表示
- 各モードに説明文を追加
- 選択中のモードの説明を下部に表示

#### スケジューラー画面（scheduler.html）
- セレクトボックス形式で表示
- 各オプションに説明を含める
- インフォアイコン（ⓘ）でヘルプを表示

### 3. スケジュール一覧での表示

スケジュール一覧に権限モード表示を追加し、設定されている権限モードが一目でわかるように改善しました。

## 技術的な詳細

### 変更ファイル

1. **web/index.html**
   - 権限モードセクションのボタンラベルと説明を更新

2. **web/scheduler.html**
   - セレクトボックスのオプションを更新
   - インフォアイコンを追加

3. **web/scheduler.js**
   - `getPermissionModeLabel`関数を追加
   - スケジュール一覧に権限モード表示を追加

## 今後の課題

### インタラクティブな確認処理

現在のClaude Code SDKの実装では、確認プロンプトに対して応答を返す機能がありません。そのため、`acceptEdits`モードでBashコマンドなどの確認が必要な操作を実行すると、タイムアウトしてしまいます。

この問題を解決するため、TODO.mdに「WebSocketを活用した双方向通信」機能を中優先度として追加しました。

## 関連ドキュメント

- [Claude Code SDK Documentation](https://docs.anthropic.com/ja/docs/claude-code/sdk)
- [スケジューラー機能ドキュメント](../features/scheduler.md)