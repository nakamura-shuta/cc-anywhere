# CC-Anywhere TODO List

計画・実装時は以下のドキュメントの仕様に従って実装してください。
* https://docs.anthropic.com/ja/docs/claude-code/sdk

## 📋 実装優先順位

### 🔥 最優先（今すぐ実施）

1. **Android Chrome環境最適化**
   - タッチ操作の最適化（最小タッチターゲット44x44px）
   - スワイプジェスチャーの実装
   - ソフトキーボード表示時のレイアウト自動調整
   - モバイル用ナビゲーションの改善
   - 仮想スクロールによるパフォーマンス向上

2. **プロダクションビルドのlocalhost:5000アクセス問題**
   - 現状の問題点を調査
   - 必要性の検討と対応方針決定

3. **リポジトリパターンの改善**
   - ジェネリックな基底リポジトリクラスの作成
   - 重複コードの削減

### 🔴 高優先度（1-2週間以内）

4. **認証・権限管理の本格実装**
   - ユーザー登録・ログイン機能
   - JWTベースの認証
   - ロールベースアクセス制御（RBAC）
   - APIキーの詳細な権限設定
   - 二要素認証（2FA）のサポート

5. **サブエージェント機能の対応**
   - Claude Code SDK v1.0.60の新機能調査・実装
   - プロジェクトレベルのサブエージェント管理
   - Web UIでのサブエージェント選択機能

6. **依存性注入（DI）の実装**
   - tsyringeまたはInversifyJSの導入
   - テスタビリティの向上

7. **Claude Code SDK新機能の活用**
   - 権限管理の強化（allowedTools/disallowedTools）
   - 環境変数管理（タスクごとのカスタム設定）
   - リアルタイムツール承認
   - タスクテンプレート機能

### 🟡 中優先度（1ヶ月以内）

8. **WebSocket処理の最適化**
   - ルームベースのブロードキャスト
   - メッセージハンドラーレジストリパターン

9. **型定義の共有**
   - shared/ディレクトリの活用
   - コード生成ツールの検討

10. **開発者体験（DX）の向上**
    - OpenAPI/Swaggerの導入
    - Docker Composeによる統一開発環境
    - CI/CDパイプラインの構築

11. **モニタリング・可観測性の強化**
    - OpenTelemetryの導入
    - Prometheus互換メトリクス
    - 詳細なヘルスチェック

12. **テスト戦略の強化**
    - E2Eテスト（Playwright）
    - 統合テストの拡充
    - パフォーマンステスト

### 🟢 低優先度（継続的改善）

13. **データベース層の改善**
    - TypeORMまたはPrismaへの移行検討
    - マイグレーション管理の自動化

14. **キャッシュレイヤーの追加**
    - Redisベースのキャッシュ実装
    - クエリ最適化

15. **多言語対応**
    - 英語版ドキュメント作成
    - UIのi18n対応

16. **ドキュメント構造の再編成**
    - 現在16個のサブディレクトリを5-6個に統合

## 🚀 最近の実装成果（要約）

### 2025-08-04
- **認証システムの統一** ✅
  - QR_AUTH_TOKENを削除しAPI_KEYに一本化
  - auth_tokenパラメータをapi_keyに変更
  - ドキュメント全体を更新

### 2025-07-29
- **フロントエンド状態管理の改善** ✅
- **Amazon Bedrock対応調査** 🚧（実装保留）

### 2025-07-28
- **SDK Continue機能の完全実装** ✅
- **createApp関数の分割** ✅
- **エラーハンドリングの統一** ✅

### 2025-07-23
- **フロントエンドの全面再構築** ✅
  - Svelte 5 + SvelteKitへの完全移行
  - shadcn-svelteによるUIシステム
  - TypeScript化完了

## 🛠️ 技術的負債

1. **バックエンドアーキテクチャ**
   - 依存性の密結合（DIコンテナ未実装）
   - データベースマイグレーションの改善必要

2. **セキュリティ**
   - レート制限の実装
   - APIキーのハッシュ化
   - 入力検証の統一

3. **パフォーマンス**
   - 大規模プロジェクトでの最適化
   - メモリ使用量の削減

## 📝 保留中の調査項目

### Amazon Bedrock対応
- **調査済み事項**:
  - Claude Code SDKは対応済み（`CLAUDE_CODE_USE_BEDROCK=1`）
  - us-east-1リージョンのみ動作確認
  - APIキーモードより約6倍遅い
- **判断**: 通常のAPIキー経由を推奨

### インタラクティブな確認処理
- SDKにプログラム的な確認APIが存在しない
- SDKの機能追加待ち